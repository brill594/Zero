<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Zero Widget 修改预览</title>
  <style>
    body { font-family: -apple-system, system-ui, Segoe UI, Roboto, sans-serif; padding: 24px; color: #222; }
    h1 { font-size: 20px; margin-bottom: 12px; }
    ul { line-height: 1.6; }
    code { background: #f6f8fa; padding: 2px 6px; border-radius: 4px; }
  </style>
  </head>
<body>
  <h1>本次修改摘要</h1>
  <ul>
    <li>将桌面小部件的 <code>resizeMode</code> 设为 <code>none</code>，禁止用户调整大小。</li>
    <li>布局根视图高度使用 <code>match_parent</code>，以匹配固定的 Provider 尺寸。</li>
    <li>添加自定义加载视图 <code>widget_loading.xml</code>，替换系统默认“正在加载…”。</li>
    <li>每次 <code>updateAppWidget</code> 后强制调用 <code>notifyAppWidgetViewDataChanged</code> 刷新列表，避免加载态卡住。</li>
    <li>重新启用水平/垂直调整并将默认 <code>minWidth=400dp</code>，更易占满整行宽度。</li>
    <li>在 Provider 和 Service 中加入详尽日志，便于定位加载卡住原因（Android 15）。</li>
    <li>移除自定义 Loading（<code>getLoadingView=null</code>），避免每项显示“正在加载…”。</li>
    <li>将列表高度改为 <code>match_parent</code>，确保项目填充可视区域。</li>
    <li>标题栏添加手动刷新按钮，点击强制 <code>notifyAppWidgetViewDataChanged</code> 并更新。</li>
    <li>将集合项中 <code>View</code> 替换为 <code>ImageView</code>，并用纯色 <code>shape</code> 保证兼容。</li>
    <li>点击列表项将打开应用并直接进入 <code>To‑Do</code> 页面。</li>
    <li>新增“重置”按钮：触发 <code>ACTION_FORCE_RELOAD</code>，强制主屏重新测量并刷新。</li>
    <li>预收缩布局：文本、间距与图标统一下调约 8%，并在代码中应用 <code>scale≈0.92</code>，以抵消宿主稳定的放大行为。</li>
    <li>调整默认高度：将 <code>minHeight</code> 从 <code>200dp</code> 降为 <code>160dp</code>，更紧凑。</li>
  </ul>
  <p>注意：该页面仅用于说明变更，不是 Android 真实渲染效果预览。</p>
</body>
</html>